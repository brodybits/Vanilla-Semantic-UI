!function(b,e,t,y){"use strict";function h(e,t){for(;e=e.previousElementSibling;)t(e)}function L(e){return!("object"!=typeof e||e.nodeType||null!==e&&e!==y&&e===e.window)&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))}function R(){var n={},i=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0],e++);for(var o=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i&&"[object Object]"===Object.prototype.toString.call(e[t])?n[t]=R(!0,n[t],e[t]):n[t]=e[t])};e<t;e++){o(arguments[e])}return n}void 0!==e&&e.Math==Math||(e="undefined"==typeof self||self.Math!=Math?Function("return this")():self),b.rating=function(g,f){var m="",d=(new Date).getTime(),v=[],p=[];return"string"==typeof g&&(m=g,g=t.querySelectorAll(g),g=[].slice.call(g)),"object"!=typeof g&&(g=[g]),g.forEach(function(c){var e,i,o=L(f)?R(!0,{},b.rating.settings,f):R({},b.rating.settings),t=o.namespace,a=o.className,n=o.metadata,r=o.selector,s=(o.error,"module"+t[0].toUpperCase()+t.substr(1)),l=c[s],u=[].slice.call(c.querySelectorAll(r.icon));(i={initialize:function(){i.verbose("Initializing rating module",o),console.log(),0===u.length&&i.setup.layout(),o.interactive?i.enable():i.disable(),i.set.initialLoad(),i.set.rating(i.get.initialRating()),i.remove.initialLoad(),i.instantiate()},instantiate:function(){i.verbose("Instantiating module",o),l=i,c[s]=i},destroy:function(){i.verbose("Destroying previous instance",l),i.remove.events(),c[s]=y},refresh:function(){u=[].slice.call(c.querySelectorAll(r.icon))},setup:{layout:function(){var e=i.get.maxRating(),t=b.rating.settings.templates.icon(e);i.debug("Generating icon html dynamically"),c.innerHTML=t,i.refresh()}},event:{mouseenter:function(e){function t(e){e.classList.add(a.selected)}!function(e,t){for(;e=e.nextElementSibling;)t(e)}(this,function(e){e.classList.remove(a.selected)}),t(c),t(this),h(this,t)},mouseleave:function(e){for(var t in c.classList.remove(a.selected),u)u[t].classList.remove(a.selected)},click:function(e){var t=i.get.rating(),n=u.indexOf(e.target)+1;("auto"==o.clearable?1===u.length:o.clearable)&&t==n?i.clearRating():i.set.rating(n)}},clearRating:function(){i.debug("Clearing current rating"),i.set.rating(0)},bind:{events:function(){i.verbose("Binding events"),c.onclick=i.event.click,c.onmouseover=i.event.mouseenter,c.onmouseout=i.event.mouseleave}},remove:{events:function(){i.verbose("Removing events"),c.onclick=y,c.onmouseover=y,c.onmouseout=y},initialLoad:function(){e=!1}},enable:function(){i.debug("Setting rating to interactive mode"),i.bind.events(),c.classList.remove(a.disabled)},disable:function(){i.debug("Setting rating to read-only mode"),i.remove.events(),c.classList.add(a.disabled)},is:{initialLoad:function(){return e}},get:{initialRating:function(){var e=c.dataset[n.rating];return e!==y?(c.removeAttribute("data-"+n.rating),e):o.initialRating},maxRating:function(){return c.dataset[n.maxRating]!==y?(c.dataset[n.maxRating]=null,c.dataset[n.maxRating]):o.maxRating},rating:function(){var e=u.filter(function(e){return e.matches("."+a.active)}).length;return i.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=u[0<=e-1?e-1:0];for(var n in c.classList.remove(a.selected),u)u[n].classList.remove(a.selected),u[n].classList.remove(a.active);0<e&&(i.verbose("Setting current rating to",e),t.classList.add(a.active),h(t,function(e){e.classList.add(a.active)})),i.is.initialLoad()||o.onRate.call(c,e)},initialLoad:function(){e=!0}},setting:function(e,t){if(i.debug("Changing setting",e,t),L(e))R(!0,o,e);else{if(t===y)return o[e];L(o[e])?R(!0,o[e],t):o[e]=t}},internal:function(e,t){if(L(e))R(!0,i,e);else{if(t===y)return i[e];i[e]=t}},debug:function(){!o.silent&&o.debug&&(o.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,o.name+":"),i.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),i.verbose.apply(console,arguments)))},error:function(){o.silent||(i.error=Function.prototype.bind.call(console.error,console,o.name+":"),i.error.apply(console,arguments))},performance:{log:function(e){var t,n;o.performance&&(n=(t=(new Date).getTime())-(d||t),d=t,v.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:c,"Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var e=o.name+":",n=0;d=!1,clearTimeout(i.performance.timer),v.forEach(function(e,t){n+=e["Execution Time"]}),e+=" "+n+"ms",m&&(e+=" '"+m+"'"),1<g.length&&(e+=" ("+g.length+")"),(console.group!==y||console.table!==y)&&0<v.length&&(console.groupCollapsed(e),console.table?console.table(v):v.forEach(function(e,t){console.log(e.Name+": "+e["Execution Time"]+"ms")}),console.groupEnd()),v=[]}},invoke:function(i,e){var o,a,t,r=l;return"string"==typeof i&&r!==y&&(i=i.split(/[\. ]/),o=i.length-1,i.forEach(function(e,t){var n=t!=o?e+i[t+1].toUpperCase()+i[t+1].slice(1):i;if(L(r[n])&&t!=o)r=r[n];else{if(r[n]!==y)return a=r[n],!1;if(!L(r[e])||t==o)return r[e]!==y&&(a=r[e]),!1;r=r[e]}})),"function"==typeof a?t=a.apply(c,e):a!==y&&(t=a),t}}).initialize(),p.push(i)}),p},b.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,n="";t<=e;)n+='<i class="icon"></i>',t++;return n}}}}(vs,window,document);