vs.rating=function(n,a){var e,o,t=a.namespace,s=a.className,i=a.metadata,r=a.selector,c=(a.error,"module"+t[0].toUpperCase()+t.substr(1)),l=n[c],v=[].slice.call(n.querySelectorAll(r.icon));return o={initialize:function(){o.verbose("Initializing rating module",a),console.log(),0===v.length&&o.setup.layout(),a.interactive?o.enable():o.disable(),o.set.initialLoad(),o.set.rating(o.get.initialRating()),o.remove.initialLoad(),o.instantiate()},instantiate:function(){o.verbose("Instantiating module",a),l=o,n[c]=o},destroy:function(){o.verbose("Destroying previous instance",l),o.remove.events(),n[c]=void 0},refresh:function(){v=[].slice.call(n.querySelectorAll(r.icon))},setup:{layout:function(){var e=o.get.maxRating(),t=vs.rating.settings.templates.icon(e);o.debug("Generating icon html dynamically"),n.innerHTML=t,o.refresh()}},event:{mouseenter:function(e){function t(e){e.classList.add(s.selected)}vs.checkTarget(e,r.icon)&&(vs.nextAll(this,function(e){e.classList.remove(s.selected)}),t(n),t(this),vs.prevAll(this,t))},mouseleave:function(e){if(vs.checkTarget(e,r.icon))for(var t in n.classList.remove(s.selected),v)v[t].classList.remove(s.selected)},click:function(e){if(vs.checkTarget(e,r.icon)){var t=o.get.rating(),i=v.indexOf(e.target)+1;("auto"==a.clearable?1===v.length:a.clearable)&&t==i?o.clearRating():o.set.rating(i)}}},clearRating:function(){o.debug("Clearing current rating"),o.set.rating(0)},bind:{events:function(){o.verbose("Binding events"),n.onclick=o.event.click,n.onmouseover=o.event.mouseenter,n.onmouseout=o.event.mouseleave}},remove:{events:function(){o.verbose("Removing events"),n.onclick=void 0,n.onmouseover=void 0,n.onmouseout=void 0},initialLoad:function(){e=!1}},enable:function(){o.debug("Setting rating to interactive mode"),o.bind.events(),n.classList.remove(s.disabled)},disable:function(){o.debug("Setting rating to read-only mode"),o.remove.events(),n.classList.add(s.disabled)},is:{initialLoad:function(){return e}},get:{initialRating:function(){var e=n.dataset[i.rating];return void 0!==e?(n.removeAttribute("data-"+i.rating),e):a.initialRating},maxRating:function(){return void 0!==n.dataset[i.maxRating]?(n.dataset[i.maxRating]=null,n.dataset[i.maxRating]):a.maxRating},rating:function(){var e=v.filter(function(e){return e.matches("."+s.active)}).length;return o.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=v[0<=e-1?e-1:0];for(var i in n.classList.remove(s.selected),v)v[i].classList.remove(s.selected),v[i].classList.remove(s.active);0<e&&(o.verbose("Setting current rating to",e),t.classList.add(s.active),vs.prevAll(t,function(e){e.classList.add(s.active)})),o.is.initialLoad()||a.onRate.call(n,e)},initialLoad:function(){e=!0}}}},vs.rating.settings={name:"Rating",namespace:"rating",silent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},selector:{icon:".icon"},metadata:{rating:"rating",maxRating:"maxRating"},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},templates:{icon:function(e){for(var t=1,i="";t<=e;)i+='<i class="icon"></i>',t++;return i}}};