vs.rating=function(i,a,o,r){var e,s,n=a.namespace,l=a.className,t=a.metadata,c=a.selector,u=(a.error,"module"+n[0].toUpperCase()+n.substr(1)),d=i[u],g=[].slice.call(i.querySelectorAll(c.icon));return(s={initialize:function(){s.verbose("Initializing rating module",a),console.log(),0===g.length&&s.setup.layout(),a.interactive?s.enable():s.disable(),s.set.initialLoad(),s.set.rating(s.get.initialRating()),s.remove.initialLoad(),s.instantiate()},instantiate:function(){s.verbose("Instantiating module",a),d=s,i[u]=s},destroy:function(){s.verbose("Destroying previous instance",d),s.remove.events(),i[u]=void 0},refresh:function(){g=[].slice.call(i.querySelectorAll(c.icon))},setup:{layout:function(){var e=s.get.maxRating(),n=vs.rating.settings.templates.icon(e);s.debug("Generating icon html dynamically"),i.innerHTML=n,s.refresh()}},event:{mouseenter:function(e){function n(e){e.classList.add(l.selected)}vs.nextAll(this,function(e){e.classList.remove(l.selected)}),n(i),n(this),vs.prevAll(this,n)},mouseleave:function(e){for(var n in i.classList.remove(l.selected),g)g[n].classList.remove(l.selected)},click:function(e){var n=s.get.rating(),t=g.indexOf(e.target)+1;("auto"==a.clearable?1===g.length:a.clearable)&&n==t?s.clearRating():s.set.rating(t)}},clearRating:function(){s.debug("Clearing current rating"),s.set.rating(0)},bind:{events:function(){s.verbose("Binding events"),i.onclick=s.event.click,i.onmouseover=s.event.mouseenter,i.onmouseout=s.event.mouseleave}},remove:{events:function(){s.verbose("Removing events"),i.onclick=void 0,i.onmouseover=void 0,i.onmouseout=void 0},initialLoad:function(){e=!1}},enable:function(){s.debug("Setting rating to interactive mode"),s.bind.events(),i.classList.remove(l.disabled)},disable:function(){s.debug("Setting rating to read-only mode"),s.remove.events(),i.classList.add(l.disabled)},is:{initialLoad:function(){return e}},get:{initialRating:function(){var e=i.dataset[t.rating];return void 0!==e?(i.removeAttribute("data-"+t.rating),e):a.initialRating},maxRating:function(){return void 0!==i.dataset[t.maxRating]?(i.dataset[t.maxRating]=null,i.dataset[t.maxRating]):a.maxRating},rating:function(){var e=g.filter(function(e){return e.matches("."+l.active)}).length;return s.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var n=g[0<=e-1?e-1:0];for(var t in i.classList.remove(l.selected),g)g[t].classList.remove(l.selected),g[t].classList.remove(l.active);0<e&&(s.verbose("Setting current rating to",e),n.classList.add(l.active),vs.prevAll(n,function(e){e.classList.add(l.active)})),s.is.initialLoad()||a.onRate.call(i,e)},initialLoad:function(){e=!0}},setting:function(e,n){if(s.debug("Changing setting",e,n),vs.isPlainObject(e))vs.extend(!0,a,e);else{if(void 0===n)return a[e];isPlainObject(a[e])?vs.extend(!0,a[e],n):a[e]=n}},internal:function(e,n){if(vs.isPlainObject(e))vs.extend(!0,s,e);else{if(void 0===n)return s[e];s[e]=n}},debug:function(){!a.silent&&a.debug&&(a.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,a.name+":"),s.debug.apply(console,arguments)))},verbose:function(){!a.silent&&a.verbose&&a.debug&&(a.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),s.verbose.apply(console,arguments)))},error:function(){a.silent||(s.error=Function.prototype.bind.call(console.error,console,a.name+":"),s.error.apply(console,arguments))},performance:{log:function(e){var n,t;a.performance&&(t=(n=(new Date).getTime())-(o||n),o=n,r.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:i,"Execution Time":t})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var e=a.name+":",t=0;o=!1,clearTimeout(s.performance.timer),r.forEach(function(e,n){t+=e["Execution Time"]}),e+=" "+t+"ms",1<modules.length&&(e+=" ("+modules.length+")"),(void 0!==console.group||void 0!==console.table)&&0<r.length&&(console.groupCollapsed(e),console.table?console.table(r):r.forEach(function(e,n){console.log(e.Name+": "+e["Execution Time"]+"ms")}),console.groupEnd()),r=[]}}}).initialize(),s},vs.rating.settings={name:"Rating",namespace:"rating",silent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},selector:{icon:".icon"},metadata:{rating:"rating",maxRating:"maxRating"},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},templates:{icon:function(e){for(var n=1,t="";n<=e;)t+='<i class="icon"></i>',n++;return t}}};