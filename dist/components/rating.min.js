!function(v,e,n,b){"use strict";function p(e,n){for(;e=e.previousElementSibling;)n(e)}void 0!==e&&e.Math==Math||(e="undefined"==typeof self||self.Math!=Math?Function("return this")():self),v.rating=function(e,g){var m=v.parse(e),d=(new Date).getTime(),f=[];return m.forEach(function(i){var e,a,o=v.extendSettings("rating",g),n=o.namespace,r=o.className,t=o.metadata,s=o.selector,c=(o.error,"module"+n[0].toUpperCase()+n.substr(1)),l=i[c],u=[].slice.call(i.querySelectorAll(s.icon));(a={initialize:function(){a.verbose("Initializing rating module",o),console.log(),0===u.length&&a.setup.layout(),o.interactive?a.enable():a.disable(),a.set.initialLoad(),a.set.rating(a.get.initialRating()),a.remove.initialLoad(),a.instantiate()},instantiate:function(){a.verbose("Instantiating module",o),l=a,i[c]=a},destroy:function(){a.verbose("Destroying previous instance",l),a.remove.events(),i[c]=b},refresh:function(){u=[].slice.call(i.querySelectorAll(s.icon))},setup:{layout:function(){var e=a.get.maxRating(),n=v.rating.settings.templates.icon(e);a.debug("Generating icon html dynamically"),i.innerHTML=n,a.refresh()}},event:{mouseenter:function(e){function n(e){e.classList.add(r.selected)}!function(e,n){for(;e=e.nextElementSibling;)n(e)}(this,function(e){e.classList.remove(r.selected)}),n(i),n(this),p(this,n)},mouseleave:function(e){for(var n in i.classList.remove(r.selected),u)u[n].classList.remove(r.selected)},click:function(e){var n=a.get.rating(),t=u.indexOf(e.target)+1;("auto"==o.clearable?1===u.length:o.clearable)&&n==t?a.clearRating():a.set.rating(t)}},clearRating:function(){a.debug("Clearing current rating"),a.set.rating(0)},bind:{events:function(){a.verbose("Binding events"),i.onclick=a.event.click,i.onmouseover=a.event.mouseenter,i.onmouseout=a.event.mouseleave}},remove:{events:function(){a.verbose("Removing events"),i.onclick=b,i.onmouseover=b,i.onmouseout=b},initialLoad:function(){e=!1}},enable:function(){a.debug("Setting rating to interactive mode"),a.bind.events(),i.classList.remove(r.disabled)},disable:function(){a.debug("Setting rating to read-only mode"),a.remove.events(),i.classList.add(r.disabled)},is:{initialLoad:function(){return e}},get:{initialRating:function(){var e=i.dataset[t.rating];return e!==b?(i.removeAttribute("data-"+t.rating),e):o.initialRating},maxRating:function(){return i.dataset[t.maxRating]!==b?(i.dataset[t.maxRating]=null,i.dataset[t.maxRating]):o.maxRating},rating:function(){var e=u.filter(function(e){return e.matches("."+r.active)}).length;return a.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var n=u[0<=e-1?e-1:0];for(var t in i.classList.remove(r.selected),u)u[t].classList.remove(r.selected),u[t].classList.remove(r.active);0<e&&(a.verbose("Setting current rating to",e),n.classList.add(r.active),p(n,function(e){e.classList.add(r.active)})),a.is.initialLoad()||o.onRate.call(i,e)},initialLoad:function(){e=!0}},setting:function(e,n){if(a.debug("Changing setting",e,n),v.isPlainObject(e))v.extend(!0,o,e);else{if(n===b)return o[e];isPlainObject(o[e])?v.extend(!0,o[e],n):o[e]=n}},internal:function(e,n){if(v.isPlainObject(e))v.extend(!0,a,e);else{if(n===b)return a[e];a[e]=n}},debug:function(){!o.silent&&o.debug&&(o.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,o.name+":"),a.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),a.verbose.apply(console,arguments)))},error:function(){o.silent||(a.error=Function.prototype.bind.call(console.error,console,o.name+":"),a.error.apply(console,arguments))},performance:{log:function(e){var n,t;o.performance&&(t=(n=(new Date).getTime())-(d||n),d=n,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:i,"Execution Time":t})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,500)},display:function(){var e=o.name+":",t=0;d=!1,clearTimeout(a.performance.timer),f.forEach(function(e,n){t+=e["Execution Time"]}),e+=" "+t+"ms",1<m.length&&(e+=" ("+m.length+")"),(console.group!==b||console.table!==b)&&0<f.length&&(console.groupCollapsed(e),console.table?console.table(f):f.forEach(function(e,n){console.log(e.Name+": "+e["Execution Time"]+"ms")}),console.groupEnd()),f=[]}}}).initialize()}),m},v.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var n=1,t="";n<=e;)t+='<i class="icon"></i>',n++;return t}}}}(vs,window,document);